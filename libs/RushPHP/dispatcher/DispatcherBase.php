<?phpnamespace RaftPHP\dispatcher;use RaftPHP\view\ViewBase;use RaftPHP\ControlBase;use RaftPHP\Framework;/** * 请求分发器基类 *  * @package dispatcher */abstract class DispatcherBase{	protected $class_name;	protected $method_name;	public function dispatch()	{	    // 获取控制器类名和方法名		$control_class  = Framework::CTRL_NAMESPACE."\\".$this->class_name;        $control_method = $this->method_name; 		try		{			// 初始化控制器			$control = new $control_class();     			// 执行前置过滤器			$filter_view = false;			if ($control instanceof ControlBase)			{				$filter_view = $control->beforeFilter();			}			if ($filter_view && $filter_view instanceof ViewBase)			{				$filter_view->display();			}			else			{				$action_view = $control->$control_method();				if ($action_view instanceof ViewBase)				{					$action_view->display();				}			}					if ($control instanceof ControlBase)			{				$control->afterFilter();			}		}		catch(\Exception $e)		{			throw $e;		}	}}